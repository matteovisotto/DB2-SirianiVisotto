<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>TelCo.</title>

    <link rel="stylesheet" href="../css/bootstrap.css" data-th-href="@{/css/bootstrap.css}">
    <link rel="stylesheet" href="../css/style.css" data-th-href="@{/css/style.css}">
    <!-- Scrollbar Custom CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/malihu-custom-scrollbar-plugin/3.1.5/jquery.mCustomScrollbar.min.css">

   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>

<body>

<div class="wrapper">


    <!-- Page Content  -->
    <div id="content">

        <nav class="navbar navbar-expand-lg navbar-light dream-navbar shadow-sm">
            <div class="container-fluid">
                <a class="btn btn-toolbar text-white" href="index.html" data-th-href="@{/}">
                    <h3><i class="fas fa-phone"></i> Co.</h3>
                </a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse text-white" id="navbarNav">
                    <ul class="navbar-nav">
                        <li class="nav-item active">
                            <a class="nav-link text-white" href="#" data-th-href="@{/admin/dashboard}">Dashboard</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-white" href="#" data-th-href="@{/admin/stats}">Sales report</a>
                        </li>
                    </ul>
                </div>
                <a class="dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false"><div class="hstack gap-3"><strong data-th-text="|${user.getName()} ${user.getSurname()}|">Username</strong> <img src="assets/placeholder_user.png" data-th-src="@{/assets/placeholder_user.png}" class="rounded-circle profile-img" /></div></a>
                    <ul class="dropdown-menu dropdown-menu-end profile-dropdown" aria-labelledby="navbarDropdown">
                        <li><a class="dropdown-item" href="#" data-th-href="@{/admin/logout}"><i class="fas fa-sign-out-alt"></i> Logout</a></li>
                    </ul>
            </div>
        </nav>
        <div class="page">
            <div class="row">
                <div class="col-12">
                    <ul class="nav nav-tabs" id="myTab" role="tablist">
                        <li class="nav-item" role="presentation">
                            <button class="nav-link active" id="purchase-tab" data-bs-toggle="tab" data-bs-target="#purchase" type="button" role="tab" aria-controls="purchase" aria-selected="true">Purchase &amp; Products</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="user-tab" data-bs-toggle="tab" data-bs-target="#user" type="button" role="tab" aria-controls="user" aria-selected="false">User &amp; Orders</button>
                        </li>

                    </ul>
                    <div class="tab-content" id="tab-content">
                        <div class="tab-pane fade show active" id="purchase" role="tabpanel" aria-labelledby="purchase-tab">
                            <h5 class="mt-3">PURCHASE STATS</h5>
                            <div class="d-flex align-items-start">
                                <div class="nav flex-column nav-pills me-5" id="v-pills-tab" role="tablist" aria-orientation="vertical">
                                    <button class="nav-link active" id="v-pills-averagePurchaseOptionalPackage-tab" data-bs-toggle="pill" data-bs-target="#averagePurchaseOptionalPackage" type="button" role="tab" aria-controls="v-pills-averagePurchaseOptionalPackage" aria-selected="true">Average purchase package</button>
                                    <button class="nav-link" id="v-pills-totalPurchaseOptional-tab" data-bs-toggle="pill" data-bs-target="#totalPurchaseOptional" type="button" role="tab" aria-controls="v-pills-totalPurchaseOptional" aria-selected="false">Total optional purchase</button>
                                    <button class="nav-link" id="v-pills-totalPurchasePackage-tab" data-bs-toggle="pill" data-bs-target="#totalPurchasePackage" type="button" role="tab" aria-controls="v-pills-totalPurchasePackage" aria-selected="false">Total package purchase</button>
                                    <button class="nav-link" id="v-pills-totalPurchasePackageOptional-tab" data-bs-toggle="pill" data-bs-target="#totalPurchasePackageOptional" type="button" role="tab" aria-controls="v-pills-totalPurchasePackageOptional" aria-selected="false">Total package purchase with optional</button>
                                    <button class="nav-link" id="v-pills-totalPurchasePackageValidity-tab" data-bs-toggle="pill" data-bs-target="#totalPurchasePackageValidity" type="button" role="tab" aria-controls="v-pills-totalPurchasePackageValidity" aria-selected="false">Total package purchase per validity period</button>
                                </div>
                                <div class="tab-content" id="myTabContent">
                                    <div class="tab-pane fade show active" id="averagePurchaseOptionalPackage" role="tabpanel" aria-labelledby="averagePurchaseOptionalPackage-tab">
                                        <h5 class="mt-3">Average purchase optional package</h5>
                                        <div class="row mt-3">
                                            <div class="col-12">
                                                <h6 class="text-primary">DATA</h6>
                                                <table class="table table-striped">
                                                    <thead><th>Package ID</th><th>Package name</th><th>Average optional</th></thead>
                                                    <tbody>
                                                    <tr data-th-each="a: ${averagePurchaseOptionalPackage}"><td data-th-text="${a.getId()}"></td><td data-th-text="${a.getPackageName()}"></td><td data-th-text="${a.getAvgOptional()}"></td></tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="tab-pane fade" id="totalPurchaseOptional" role="tabpanel" aria-labelledby="totalPurchaseOptional-tab">
                                        <h5 class="mt-3">Total purchase optional</h5>
                                        <div class="row mt-3">
                                            <div class="col-12">
                                                <h6 class="text-primary">DATA</h6>
                                                <table class="table table-striped">
                                                    <thead><th>Optional ID</th><th>Optional name</th><th>Total purchase</th></thead>
                                                    <tbody>
                                                    <tr data-th-each="t: ${totalPurchaseOptional}"><td data-th-text="${t.getId()}"></td><td data-th-text="${t.getOptionalName()}"></td><td data-th-text="${t.getTotPurchase()}"></td></tr>
                                                    </tbody>
                                                </table>
                                                <br/>
                                                <div data-th-if="${bestOptional.size() == 1}">
                                                    <strong>Best seller: </strong><span data-th-text="${bestOptional.get(0).getOptionalName()}"></span> with <span data-th-text="${bestOptional.get(0).getTotPurchase()}"></span> sales.
                                                </div>
                                                <div data-th-if="${bestOptional.size() > 1}">
                                                    <strong>The bestsellers are: </strong><span data-th-each="b: ${bestOptional}"><span data-th-text="${b.getOptionalName()}"></span>, </span> with <span data-th-text="${bestOptional.get(0).getTotPurchase()}"></span> sales.
                                                </div>
                                                <div data-th-if="${bestOptional.size() == 0}">
                                                    <strong>There isn't a best seller.</strong>.
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="tab-pane fade" id="totalPurchasePackage" role="tabpanel" aria-labelledby="totalPurchasePackage-tab">
                                        <h5 class="mt-3">Total purchase package</h5>
                                        <div class="row mt-3">
                                            <div class="col-12">
                                                <h6 class="text-primary">DATA</h6>
                                                <table class="table table-striped">
                                                    <thead><th>Package ID</th><th>Package name</th><th>Total purchase</th></thead>
                                                    <tbody>
                                                    <tr data-th-each="t: ${totalPurchasePackage}"><td data-th-text="${t.getId()}"></td><td data-th-text="${t.getPackageName()}"></td><td data-th-text="${t.getTotPurchase()}"></td></tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="tab-pane fade" id="totalPurchasePackageOptional" role="tabpanel" aria-labelledby="totalPurchasePackageOptional-tab">
                                        <h5 class="mt-3">Total purchase package optional</h5>
                                        <div class="row mt-3">
                                            <div class="col-12">
                                                <h6 class="text-primary">DATA</h6>
                                                <table class="table table-striped">
                                                    <thead><th>Package ID</th><th>Package name</th><th>Has optional product</th><th>Total purchase</th></thead>
                                                    <tbody>
                                                    <tr data-th-each="t: ${totalPurchasePackageOptional}"><td data-th-text="${t.getId().getPackageId()}"></td><td data-th-text="${t.getPackageName()}"></td><td><span data-th-if="${t.getId().getHasOptionalProduct() == 1}">&#10004;</span><span data-th-if="${t.getId().getHasOptionalProduct() == 0}">&#10008;</span></td><td data-th-text="${t.getTotPurchase()}"></td></tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="tab-pane fade" id="totalPurchasePackageValidity" role="tabpanel" aria-labelledby="totalPurchasePackageValidity-tab">
                                        <h5 class="mt-3">Total purchase package validity</h5>
                                        <div class="row mt-3">
                                            <div class="col-12">
                                                <h6 class="text-primary">DATA</h6>
                                                <table class="table table-striped">
                                                    <thead><th>Package ID</th><th>Package name</th><th>Validity period</th><th>Total purchase</th></thead>
                                                    <tbody>
                                                    <tr data-th-each="t: ${totalPurchasePackageValidity}"><td data-th-text="${t.getId().getPackageId()}"></td><td data-th-text="${t.getPackageName()}"></td><td data-th-text="${t.getId().getValidityPeriod()}"></td><td data-th-text="${t.getTotPurchase()}"></td></tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="tab-pane fade" id="user" role="tabpanel" aria-labelledby="package-tab">
                            <h5 class="mt-3">USER STATS</h5>
                            <div class="d-flex align-items-start">
                                <div class="nav flex-column nav-pills me-5" id="v-pills-tab2" role="tablist" aria-orientation="vertical">
                                    <button class="nav-link active" id="v-pills-suspendedOrders-tab" data-bs-toggle="pill" data-bs-target="#suspendedOrders" type="button" role="tab" aria-controls="v-pills-suspendedOrders" aria-selected="true">Suspended orders</button>
                                    <button class="nav-link" id="v-pills-insolventUsers-tab" data-bs-toggle="pill" data-bs-target="#insolventUsers" type="button" role="tab" aria-controls="v-pills-insolventUsers" aria-selected="false">Insolvent users</button>
                                    <button class="nav-link" id="v-pills-alerts-tab" data-bs-toggle="pill" data-bs-target="#alerts" type="button" role="tab" aria-controls="v-pills-alerts" aria-selected="false">Alerts</button>

                                </div>
                                <div class="tab-content" id="myTabContent2">
                                    <div class="tab-pane fade show active" id="suspendedOrders" role="tabpanel" aria-labelledby="suspendedOrders-tab">
                                        <h5 class="mt-3">Suspended orders</h5>
                                        <div class="row mt-3">
                                            <div class="col-12">
                                                <h6 class="text-primary">DATA</h6>
                                                <table class="table table-striped">
                                                    <thead><th>Order ID</th><th>Price</th><th>Payments attempts</th><th>Start date of the order</th><th>Order created at</th><th>User ID</th><th>Username</th></thead>
                                                    <tbody>
                                                    <tr data-th-each="s: ${suspendedOrders}"><td data-th-text="${s.getId()}"></td><td><span data-th-text="${#numbers.formatDecimal(s.getPrice(), 0, 2)}"></span> &euro;</td><td data-th-text="${s.getPaymentHistories().size()}"></td><td data-th-text="${s.getStartDate()}"></td><td data-th-text="${s.getCreatedAt()}"></td><td data-th-text="${s.getUser().getId()}"></td><td data-th-text="${s.getUser().getUsername()}"></td></tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="tab-pane fade" id="insolventUsers" role="tabpanel" aria-labelledby="insolventUsers-tab">
                                        <h5 class="mt-3">Insolvent users</h5>
                                        <div class="row mt-3">
                                            <div class="col-12">
                                                <h6 class="text-primary">DATA</h6>
                                                <table class="table table-striped">
                                                    <thead><th>Name</th><th>Surname</th><th>Username</th><th>Email</th></thead>
                                                    <tbody>
                                                    <tr data-th-each="i: ${insolventUsers}"><td data-th-text="${i.getName()}"></td><td data-th-text="${i.getSurname()}"></td><td data-th-text="${i.getUsername()}"></td><td data-th-text="${i.getEmail()}"></td></tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="tab-pane fade" id="alerts" role="tabpanel" aria-labelledby="alerts-tab">
                                        <h5 class="mt-3">Alerts</h5>
                                        <div class="row mt-3">
                                            <div class="col-12">
                                                <h6 class="text-primary">DATA</h6>
                                                <table class="table table-striped">
                                                    <thead><th>Username</th><th>Email</th><th>Amount</th><th>Timestamp of the alert</th></thead>
                                                    <tbody>
                                                    <tr data-th-each="a: ${alerts}"><td data-th-text="${a.getUsername()}"></td><td data-th-text="${a.getEmail()}"></td><td><span data-th-text="${#numbers.formatDecimal(a.getAmount(), 0, 2)}"></span> &euro;</td><td data-th-text="${a.getDateTime()}"></td></tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>



                </div>
            </div>
        </div>
    </div>
</div>

    <script   src="https://code.jquery.com/jquery-3.6.0.min.js"   integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="   crossorigin="anonymous"></script>
    <!-- Popper.JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
    <!-- Bootstrap JS -->
    <script src="../js/bootstrap.min.js" data-th-src="@{/js/bootstrap.min.js}"></script>
    <!-- jQuery Custom Scroller CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/malihu-custom-scrollbar-plugin/3.1.5/jquery.mCustomScrollbar.concat.min.js"></script>


<div class="modal fade" id="errorModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content bg-danger">
            <div class="modal-header border-0">
                <h3 class="text-white">Error</h3>
            </div>
            <div class="modal-body">
                <p class="text-white" id="errorContent"></p>
            </div>
        </div>
    </div>
</div>

<script src="../js/errors.js" data-th-src="@{/js/errors.js}"></script>


</body>

</html>
